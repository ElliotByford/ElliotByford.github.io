<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="styles.css" rel="stylesheet">
    <script src="https://unpkg.com/wanakana@5.0.0/wanakana.min.js"></script>

    <title>Learn Hiragana</title>
</head>

<body>
    <div class="container my-4 col-md-8 col-lg-6 mx-auto">
        <header class="border-bottom">
            <div class="d-flex">
                <div class="flex-grow-1">
                    <h1 class="display-6">Learn <span class="text-muted">Hiragana</span></h1>
                    <p class="blockquote-footer fs-6 text-body">ひらがなを覚える</p>
                </div>
                <div class="my-auto">
                    <a href="https://github.com/ElliotByford">GitHub</a> | <a href="mailto:elliot.byford.2@gmail.com">Contact</a>
                </div>
            </div>
        </header>

        <div class="mt-3 text-center">
            <div class="btn-group mb-3" role="group">
                <button type="button" class="btn btn-outline-secondary btn-sm" id="selectAll">Select all</button> <!-- Can add shadow-none-->
                <button type="button" class="btn btn-outline-secondary btn-sm" id="deselectAll">Deselect all</button>
            </div>

            <table class="table mx-auto text-center fw-bolder fs-3 border">
                <tr>
                    <td class="kana">あ</td>
                    <td class="kana">い</td>
                    <td class="kana">う</td>
                    <td class="kana">え</td>
                    <td class="kana">お</td>
                </tr>
                <tr>
                    <td class="kana">か</td>
                    <td class="kana">き</td>
                    <td class="kana">く</td>
                    <td class="kana">け</td>
                    <td class="kana">こ</td>
                </tr>
                <tr>
                    <td class="kana">さ</td>
                    <td class="kana">し</td>
                    <td class="kana">す</td>
                    <td class="kana">せ</td>
                    <td class="kana">そ</td>
                </tr>
                <tr>
                    <td class="kana">た</td>
                    <td class="kana">ち</td>
                    <td class="kana">つ</td>
                    <td class="kana">て</td>
                    <td class="kana">と</td>
                </tr>
                <tr>
                    <td class="kana">な</td>
                    <td class="kana">に</td>
                    <td class="kana">ぬ</td>
                    <td class="kana">ね</td>
                    <td class="kana">の</td>
                </tr>
                <tr>
                    <td class="kana">は</td>
                    <td class="kana">ひ</td>
                    <td class="kana">ふ</td>
                    <td class="kana">へ</td>
                    <td class="kana">ほ</td>
                </tr>
                <tr>
                    <td class="kana">ま</td>
                    <td class="kana">み</td>
                    <td class="kana">む</td>
                    <td class="kana">め</td>
                    <td class="kana">も</td>
                </tr>
                <tr>
                    <td class="kana">や</td>
                    <td></td>
                    <td class="kana">ゆ</td>
                    <td></td>
                    <td class="kana">よ</td>
                </tr>
                <tr>
                    <td class="kana">ら</td>
                    <td class="kana">り</td>
                    <td class="kana">る</td>
                    <td class="kana">れ</td>
                    <td class="kana">ろ</td>
                </tr>
                <tr>
                    <td class="kana">わ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="kana">を</td>
                </tr>
                <tr>
                    <td class="kana">ん</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>

            <button id="submit" type="button" class="btn btn-secondary btn-small">Test</button>
        </div>

    </div> <!-- End of overall container div-->

    <script>
        // Select all kana in the table and add onClick.
        let kana = document.querySelectorAll('.kana');
        for (let i = 0; i < kana.length; i++)
        {
            kana[i].addEventListener('click', kanaSelect)
        }

        // Select submit button and add onClick.
        let submit_button = document.querySelector('#submit')
        submit_button.addEventListener('click', submit)

        // When kana clicked, toggle the 'selected' class to change the styling.
        function kanaSelect()
        {
            this.classList.toggle('selected');
        }

        // Select the Selectall and deselectAll buttons and add onClick.
        // Make them add or remove the 'selected' class to all kana when clicked.
        let selectAllbtn = document.querySelector('#selectAll')
        let deselectAllbtn = document.querySelector('#deselectAll')

        selectAllbtn.addEventListener('click', function() {
        for (let i = 0; i < kana.length; i++)
        {
            kana[i].classList.add('selected');
        }
        });

        deselectAllbtn.addEventListener('click', function() {
        for (let i = 0; i < kana.length; i++)
        {
            kana[i].classList.remove('selected');
        }
        });

        // Store the selected kana in an array.
        // Save the array in local storage to be used on the review page.
        function submit()
        {
            let selectedKana = document.querySelectorAll('.selected');
            let kanaArray = [];

            // Error check if none selected
            if (selectedKana.length == 0)
            {
                return;
            }

            for (let i = 0; i < selectedKana.length; i++)
            {
                kana = selectedKana[i].innerHTML;
                kanaArray.push(kana);
            }

            // Saving the new array in local storage
            localStorage.setItem('kanaArray', JSON.stringify(kanaArray));
            window.location.href = "test.html";

            // Could randomise the order of the array here and have a toggle.
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>